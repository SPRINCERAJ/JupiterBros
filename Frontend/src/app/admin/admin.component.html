<div class="container mt-4">
  <h1 class="mb-4">
    Admin Dashboard
    <span class="float-right">Hiii, {{ adminname }}</span>
  </h1>
  <nav>
    <a (click)="scrollByPercentage(0)">ADD USER</a>
    <a (click)="scrollByPercentage(90)">SEARCH & FILTER</a>
    <a (click)="scrollByPercentage(100)">USER LIST</a>
    <a (click)="routetoproject()">ACCESS PROJECTS</a>
    <a (click)="admin_as_user()">ASSIGNED PROJECTS</a>
    <a (click)="open_dashboard()">DASHBOARD</a>
  </nav>
  <!-- Add User Form -->
  <div class="card mb-4" id="add_user">
    <div class="card-body">
      <h3>Add User</h3>
      <form (ngSubmit)="addUser()">
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" class="form-control" [(ngModel)]="newUser.username" name="username" placeholder="Username" required />
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" class="form-control" [(ngModel)]="newUser.password" name="password" placeholder="Password" required />
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" class="form-control" [(ngModel)]="newUser.email" name="email" placeholder="Email" required />
        </div>
        <div class="form-group">
          <label for="phone">Phone</label>
          <input type="text" class="form-control" [(ngModel)]="newUser.phone" name="phone" placeholder="Phone" required />
        </div>
        <div class="form-group">
          <label for="department">Department</label>
          <div>
            <label><input type="radio" [(ngModel)]="newUser.department" name="department" value="HR" /> HR</label>
            <label><input type="radio" [(ngModel)]="newUser.department" name="department" value="IT" /> IT</label>
            <label><input type="radio" [(ngModel)]="newUser.department" name="department" value="Sales" /> Sales</label>
            <label><input type="radio" [(ngModel)]="newUser.department" name="department" value="Finance" /> Finance</label>
          </div>
        </div>
        <div class="form-group">
          <label for="businessUnit">Business Unit</label>
          <select class="form-control" [(ngModel)]="newUser.businessUnit" name="businessUnit" required>
            <option value="">Select Business Unit</option>
            <option value="Technology">Technology</option>
            <option value="Marketing">Marketing</option>
            <option value="Operations">Operations</option>
            <option value="Support">Support</option>
          </select>
        </div>
        <div class="form-group">
          <label for="role">Role</label>
          <div>
            <label><input type="radio" [(ngModel)]="newUser.role" name="role" value="ADMIN" /> Admin</label>
            <label><input type="radio" [(ngModel)]="newUser.role" name="role" value="NON ADMIN" /> Non Admin</label>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Add User</button>
      </form>
    </div>
  </div>
  <hr />

  <!-- Search and Filter -->
  <div class="card mb-4" id="search_and_filter">
    <div class="card-body">
      <h3>Search and Filter</h3>
      <div class="form-group">
        <input type="text" class="form-control" [(ngModel)]="searchQuery" name="searchQuery" placeholder="Search by name, email" (input)="applyFilters()" />
      </div>
      <div class="mt-3">
        <label for="filterDepartment">Filter by Department</label>
        <select class="form-control mb-2" [(ngModel)]="filters.department" name="filterDepartment" (change)="applyFilters()">
          <option value="">All Departments</option>
          <option value="HR">HR</option>
          <option value="IT">IT</option>
          <option value="Sales">Sales</option>
          <option value="Finance">Finance</option>
        </select>
        <label for="filterBusinessUnit">Filter by Business Unit</label>
        <select class="form-control mb-2" [(ngModel)]="filters.businessUnit" name="filterBusinessUnit" (change)="applyFilters()">
          <option value="">All Business Units</option>
          <option value="Technology">Technology</option>
          <option value="Marketing">Marketing</option>
          <option value="Operations">Operations</option>
          <option value="Support">Support</option>
        </select>
      </div>
    </div>
  </div>
  <hr />

  <!-- User List -->
  <div class="card" id="user_list">
    <div class="card-body">
      <h3>User List</h3>
      <ul class="list-group">
        <li *ngFor="let user of displayedUsers" class="list-group-item d-flex justify-content-between align-items-center">
          {{ user.username }} - {{ user.email }}
          <button class="btn btn-danger btn-sm" (click)="deleteUser(user._id)">Delete</button>
        </li>
      </ul>
    </div>
  </div>
</div>
